{"version":3,"file":"js/job.0d65348c.js","mappings":"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","sources":["webpack://dashboard/./src/views/jobs/Job.vue","webpack://dashboard/./src/components/JobEventBox.vue","webpack://dashboard/./src/components/JobEventBox.vue?c51e","webpack://dashboard/./src/views/jobs/Job.vue?ad79"],"sourcesContent":["<template>\n  <div>\n    <div class=\"card border-secondary mb-3\">\n      <div class=\"card-header\"><h2>Job - {{ job.id }}</h2></div>\n      <div class=\"card-body\">\n        <h4 class=\"card-title\">{{ job.type }}</h4>\n        <p class=\"card-text\">\n          <pre v-html=\"JSON.stringify(payload, null, 2)\" />\n        </p>\n      </div>\n    </div>\n    <div class=\"card border-secondary mb-3\">\n      <div class=\"card-header\">History</div>\n      <div class=\"card-body\">\n        <job-event-box v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from \"@/api\";\nimport JobEventBox from \"@/components/JobEventBox\";\n\nexport default {\n  name: \"Job\",\n  components: {JobEventBox},\n  data() {\n    return {\n      job: {\n        id: this.$route.params.id,\n        type: ''\n      },\n      payload: {},\n      events: [],\n      refreshTimer: undefined\n    }\n  },\n  created() {\n    this.fetchJob(true);\n    this.fetchEvents();\n    this.refreshTimer = setInterval(this.fetchJob, 3000)\n  },\n  beforeUnmount() {\n    clearInterval(this.refreshTimer)\n  },\n  methods: {\n    fetchJob(payload = false) {\n      api.get('/jobs/' + this.job.id, { params: { payload: true } }).then(res => {\n        if(this.job.status !== res.data.data.status) {\n          this.fetchEvents()\n        }\n        if(payload) {\n          this.payload = res.data.data.payload\n        }\n        this.job = res.data.data\n      }, () => {\n        this.$router.push({\n          name: 'jobs'\n        })\n      })\n    },\n    fetchEvents() {\n      api.get('/jobs/' + this.job.id + '/events').then(res => this.events = res.data.data)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","<template>\n  <div class=\"event-box\" :class=\"{ active, [`event-type-${ event.type.toLowerCase() }`]: true }\">\n    <div class=\"event-box-header\" @click=\"toggleActive()\">\n      <div class=\"summary\">\n        {{ eventTitles[event.type] }} <span class=\"float-end\">{{ event.created_at }}</span>\n      </div>\n    </div>\n    <div class=\"collapse event-box-content\" :class=\"{ show: active }\">\n      <div v-if=\"loading\" class=\"text-center\">\n        <div class=\"spinner-border\" role=\"status\">\n          <span class=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n      <table v-else-if=\"logs.length > 0\">\n        <tbody>\n          <tr v-for=\"log in logs\" :key=\"log.id\">\n            <td style=\"padding-right: 20px; vertical-align: top;\"><pre>{{ log.created_at }}</pre></td>\n            <td>\n              <code v-html=\"log.message\"></code>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <i v-else><small>No logs to display</small></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from \"@/api\";\n\nexport default {\n  name: \"JobEventBox\",\n  props: {\n    event: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      active: false,\n      logs: [],\n      loading: false,\n      eventTitles: {\n        ENQUEUED: 'Job enqueued',\n        PROCESSING: 'Processing job',\n        FAILED: 'Job processing failed',\n        SUCCESS: 'Job processing succeeded'\n      }\n    }\n  },\n  methods: {\n    toggleActive() {\n      this.active = !this.active\n      if (this.active) {\n        this.fetchLogs()\n      } else {\n        this.logs = []\n      }\n    },\n    fetchLogs() {\n      this.loading = true\n      api.get('/jobs/' + this.event.job_id + '/events/' + this.event.id + '/logs').then(res => {\n        this.logs = res.data.data\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/css\" scoped>\n.event-box {\n\n  margin: 0;\n  -webkit-box-shadow: 0px 2px 4px 1px #7A7A7A;\n  box-shadow: 0px 2px 4px 1px #7A7A7A;\n\n  &.active {\n    margin-top: 10px;\n    margin-bottom: 10px;\n\n    .event-box-header .summary {\n      padding-top: 20px;\n      padding-bottom: 20px;\n    }\n\n  }\n\n  .event-box-header {\n    cursor: pointer;\n    user-select: none;\n    .summary {\n      margin-left: 15px;\n      margin-right: 15px;\n      padding-top: 15px;\n      padding-bottom: 15px;\n    }\n  }\n\n  .event-box-content {\n    padding: 15px;\n  }\n\n  &.event-type-enqueued {\n    .event-box-header {\n      color: rgb(13, 60, 97);\n      background-color: rgb(232, 244, 253);\n    }\n  }\n\n  &.event-type-processing {\n    .event-box-header {\n      color: rgb(102, 60, 0);\n      background-color: rgb(255, 244, 229);\n    }\n  }\n\n  &.event-type-failed {\n    .event-box-header {\n      color: rgb(97, 26, 21);\n      background-color: rgb(253, 236, 234);\n    }\n  }\n\n  &.event-type-success {\n    .event-box-header {\n      color: rgb(30, 70, 32);\n      background-color: rgb(237, 247, 237);\n    }\n  }\n\n}\n</style>","import { render } from \"./JobEventBox.vue?vue&type=template&id=1413ce45&scoped=true\"\nimport script from \"./JobEventBox.vue?vue&type=script&lang=js\"\nexport * from \"./JobEventBox.vue?vue&type=script&lang=js\"\n\nimport \"./JobEventBox.vue?vue&type=style&index=0&id=1413ce45&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/user/dev/java/jobs/dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1413ce45\"]])\n\nexport default __exports__","import { render } from \"./Job.vue?vue&type=template&id=5804f943\"\nimport script from \"./Job.vue?vue&type=script&lang=js\"\nexport * from \"./Job.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/user/dev/java/jobs/dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_toDisplayString","$data","id","type","innerHTML","JSON","stringify","_hoisted_8","_Fragment","_renderList","event","_createBlock","_component_job_event_box","key","role","_hoisted_4","style","_hoisted_10","active","$props","toLowerCase","onClick","$options","created_at","show","_hoisted_5","length","_hoisted_6","log","message","_hoisted_9","_hoisted_11","name","props","Object","data","logs","loading","eventTitles","ENQUEUED","PROCESSING","FAILED","SUCCESS","methods","toggleActive","this","fetchLogs","api","job_id","then","res","__exports__","components","JobEventBox","job","$route","params","payload","events","refreshTimer","undefined","created","fetchJob","fetchEvents","setInterval","beforeUnmount","clearInterval","status","$router","push","render"],"sourceRoot":""}