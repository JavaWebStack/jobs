{"version":3,"file":"js/job.fe497f05.js","mappings":"+LAESA,MAAM,8B,GACJA,MAAM,e,GACLA,MAAM,e,GAGLA,MAAM,a,GACJA,MAAM,a,GAMVA,MAAM,a,GACLA,MAAM,c,GACPA,MAAM,a,mBAKRA,MAAM,8B,GACTC,EAAAA,EAAAA,GAAsC,OAAjCD,MAAM,eAAc,WAAO,G,GAC3BA,MAAM,a,4EAtBfE,EAAAA,EAAAA,IA0BM,aAzBJD,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,EAjBJA,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAEK,KAFL,EAAwB,WAChBE,EAAAA,EAAAA,IAAGC,EAAAA,IAAIC,IAAE,IAEjBJ,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJA,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJA,EAAAA,EAAAA,GAA2E,UAAnED,MAAM,0BAA2BM,QAAK,eAAEC,EAAAA,YAAW,YAC3DN,EAAAA,EAAAA,GAA2E,UAAnED,MAAM,yBAA0BM,QAAK,eAAEC,EAAAA,cAAa,iBAIlEN,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJA,EAAAA,EAAAA,GAA0C,KAA1C,GAA0CE,EAAAA,EAAAA,IAAhBC,EAAAA,IAAII,MAAI,IAClCP,EAAAA,EAAAA,GAEI,IAFJ,EAEI,EADFA,EAAAA,EAAAA,GAAiD,OAA5CQ,UAAQC,KAAKC,UAAUP,EAAAA,QAAO,SAAnC,iBAINH,EAAAA,EAAAA,GAKM,MALN,EAKM,CAJJW,GACAX,EAAAA,EAAAA,GAEM,MAFN,EAEM,gBADJC,EAAAA,EAAAA,IAAwEW,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAAzCV,EAAAA,QAATW,K,WAAtBC,EAAAA,EAAAA,IAAwEC,EAAA,CAAhCC,IAAKH,EAAMV,GAAKU,MAAOA,GAA/D,gC,8ECrBGf,MAAM,W,GACwCA,MAAM,a,SAIrCA,MAAM,e,UACxBC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,iBAAiBmB,KAAK,UAAjC,EACElB,EAAAA,EAAAA,GAA+C,QAAzCD,MAAM,mBAAkB,gBADhC,K,GAAAoB,G,aAOQC,MAAA,iD,oCAOApB,EAAAA,EAAAA,GAAiC,aAA1B,sBAAkB,K,GAAzBqB,G,0CAtBdpB,EAAAA,EAAAA,IAwBM,OAxBDF,OAAK,SAAC,YAAW,CAAAuB,OAAWnB,EAAAA,OAAM,eAAkBoB,EAAAA,MAAMhB,KAAKiB,kBAAW,MAA/E,EACExB,EAAAA,EAAAA,GAIM,OAJDD,MAAM,mBAAoBM,QAAK,eAAEC,EAAAA,iBAAtC,EACEN,EAAAA,EAAAA,GAEM,MAFN,EAEM,mBADDG,EAAAA,YAAYoB,EAAAA,MAAMhB,OAAI,WAAiB,IAAC,IAAAP,EAAAA,EAAAA,GAAqD,OAArD,GAAqDE,EAAAA,EAAAA,IAA1BqB,EAAAA,MAAME,YAAU,QAG1FzB,EAAAA,EAAAA,GAiBM,OAjBDD,OAAK,SAAC,6BAA4B,CAAA2B,KAAiBvB,EAAAA,WAAxD,CACaA,EAAAA,UAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAIM,MAJN,EAIM0B,IACYxB,EAAAA,KAAKyB,OAAM,eAA7B3B,EAAAA,EAAAA,IASQ,QAAA4B,EAAA,EARN7B,EAAAA,EAAAA,GAOQ,6BANNC,EAAAA,EAAAA,IAKKW,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALaV,EAAAA,MAAP2B,K,WAAX7B,EAAAA,EAAAA,IAKK,MALoBgB,IAAKa,EAAI1B,IAAlC,EACEJ,EAAAA,EAAAA,GAA0F,KAA1F,EAA0F,EAApCA,EAAAA,EAAAA,GAA+B,YAAAE,EAAAA,EAAAA,IAAvB4B,EAAIL,YAAU,MAC5EzB,EAAAA,EAAAA,GAEK,YADHA,EAAAA,EAAAA,GAAkC,QAA5BQ,UAAQsB,EAAIC,SAAlB,iBAHJ,aAFJ,WAUA9B,EAAAA,EAAAA,IAA+C,IAAA+B,EAAArB,KAhBjD,IANF,E,CA8BF,OACEsB,KAAM,cACNC,MAAO,CACLpB,MAAO,CACLP,KAAM4B,SAGVC,OACE,MAAO,CACLd,QAAQ,EACRe,KAAM,GACNC,SAAS,EACTC,YAAa,CACXC,UAAW,gBACXC,SAAU,eACVC,WAAY,iBACZC,OAAQ,wBACRC,QAAS,4BAGd,EACDC,QAAS,CACPC,eACEC,KAAKzB,QAAUyB,KAAKzB,OAChByB,KAAKzB,OACPyB,KAAKC,YAELD,KAAKV,KAAO,EAEf,EACDW,YACED,KAAKT,SAAU,EACfW,EAAAA,EAAAA,IAAQ,SAAWF,KAAKjC,MAAMoC,OAAS,WAAaH,KAAKjC,MAAMV,GAAK,SAAS+C,MAAKC,IAChFL,KAAKV,KAAOe,EAAIhB,KAAKA,KACrBW,KAAKT,SAAU,CAAf,GAEJ,I,QC5DJ,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,QFyBA,GACEpB,KAAM,MACNqB,WAAY,CAACC,YAAWA,GACxBnB,OACE,MAAO,CACLoB,IAAK,CACHpD,GAAI2C,KAAKU,OAAOC,OAAOtD,GACvBG,KAAM,IAERoD,QAAS,CAAC,EACVC,OAAQ,GACRC,kBAAcC,EAEjB,EACDC,UACEhB,KAAKiB,UAAS,GACdjB,KAAKkB,cACLlB,KAAKc,aAAeK,YAAYnB,KAAKiB,SAAU,IAChD,EACDG,gBACEC,cAAcrB,KAAKc,aACpB,EACDhB,QAAS,CACPmB,SAASL,GAAU,GACjBV,EAAAA,EAAAA,IAAQ,SAAWF,KAAKS,IAAIpD,GAAI,CAAEsD,OAAQ,CAAEC,SAAS,KAAUR,MAAKC,IAC/DL,KAAKS,IAAIa,SAAWjB,EAAIhB,KAAKA,KAAKiC,QACnCtB,KAAKkB,cAEJN,IACDZ,KAAKY,QAAUP,EAAIhB,KAAKA,KAAKuB,SAE/BZ,KAAKS,IAAMJ,EAAIhB,KAAKA,IAApB,IACC,KACDW,KAAKuB,QAAQC,KAAK,CAChBtC,KAAM,QADR,GAIH,EACDuC,YACEvB,EAAAA,EAAAA,UAAW,SAAWF,KAAKS,IAAIpD,IAAI+C,MAAK,KACtCJ,KAAKuB,QAAQC,KAAK,CAChBtC,KAAM,QADR,GAIH,EACDwC,UAEC,EACDR,cACEhB,EAAAA,EAAAA,IAAQ,SAAWF,KAAKS,IAAIpD,GAAK,WAAW+C,MAAKC,GAAOL,KAAKa,OAASR,EAAIhB,KAAKA,MACjF,IG/EJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASsC,KAEpE,O","sources":["webpack://dashboard/./src/views/jobs/Job.vue","webpack://dashboard/./src/components/JobEventBox.vue","webpack://dashboard/./src/components/JobEventBox.vue?c51e","webpack://dashboard/./src/views/jobs/Job.vue?ad79"],"sourcesContent":["<template>\n  <div>\n    <div class=\"card border-secondary mb-3\">\n      <div class=\"card-header\">\n        <h2 class=\"float-start\">\n          Job - {{ job.id }}\n        </h2>\n        <div class=\"float-end\">\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary\" @click=\"requeue()\">Requeue</button>\n            <button class=\"btn btn-outline-danger\" @click=\"deleteJob()\">Delete</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <h4 class=\"card-title\">{{ job.type }}</h4>\n        <p class=\"card-text\">\n          <pre v-html=\"JSON.stringify(payload, null, 2)\" />\n        </p>\n      </div>\n    </div>\n    <div class=\"card border-secondary mb-3\">\n      <div class=\"card-header\">History</div>\n      <div class=\"card-body\">\n        <job-event-box v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from \"@/api\";\nimport JobEventBox from \"@/components/JobEventBox\";\n\nexport default {\n  name: \"Job\",\n  components: {JobEventBox},\n  data() {\n    return {\n      job: {\n        id: this.$route.params.id,\n        type: ''\n      },\n      payload: {},\n      events: [],\n      refreshTimer: undefined\n    }\n  },\n  created() {\n    this.fetchJob(true);\n    this.fetchEvents();\n    this.refreshTimer = setInterval(this.fetchJob, 3000)\n  },\n  beforeUnmount() {\n    clearInterval(this.refreshTimer)\n  },\n  methods: {\n    fetchJob(payload = false) {\n      api.get('/jobs/' + this.job.id, { params: { payload: true } }).then(res => {\n        if(this.job.status !== res.data.data.status) {\n          this.fetchEvents()\n        }\n        if(payload) {\n          this.payload = res.data.data.payload\n        }\n        this.job = res.data.data\n      }, () => {\n        this.$router.push({\n          name: 'jobs'\n        })\n      })\n    },\n    deleteJob() {\n      api.delete('/jobs/' + this.job.id).then(() => {\n        this.$router.push({\n          name: 'jobs'\n        })\n      })\n    },\n    requeue() {\n\n    },\n    fetchEvents() {\n      api.get('/jobs/' + this.job.id + '/events').then(res => this.events = res.data.data)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","<template>\n  <div class=\"event-box\" :class=\"{ active, [`event-type-${ event.type.toLowerCase() }`]: true }\">\n    <div class=\"event-box-header\" @click=\"toggleActive()\">\n      <div class=\"summary\">\n        {{ eventTitles[event.type] || 'Unknown' }} <span class=\"float-end\">{{ event.created_at }}</span>\n      </div>\n    </div>\n    <div class=\"collapse event-box-content\" :class=\"{ show: active }\">\n      <div v-if=\"loading\" class=\"text-center\">\n        <div class=\"spinner-border\" role=\"status\">\n          <span class=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n      <table v-else-if=\"logs.length > 0\">\n        <tbody>\n          <tr v-for=\"log in logs\" :key=\"log.id\">\n            <td style=\"padding-right: 20px; vertical-align: top;\"><pre>{{ log.created_at }}</pre></td>\n            <td>\n              <code v-html=\"log.message\"></code>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <i v-else><small>No logs to display</small></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from \"@/api\";\n\nexport default {\n  name: \"JobEventBox\",\n  props: {\n    event: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      active: false,\n      logs: [],\n      loading: false,\n      eventTitles: {\n        SCHEDULED: 'Job scheduled',\n        ENQUEUED: 'Job enqueued',\n        PROCESSING: 'Processing job',\n        FAILED: 'Job processing failed',\n        SUCCESS: 'Job processing succeeded'\n      }\n    }\n  },\n  methods: {\n    toggleActive() {\n      this.active = !this.active\n      if (this.active) {\n        this.fetchLogs()\n      } else {\n        this.logs = []\n      }\n    },\n    fetchLogs() {\n      this.loading = true\n      api.get('/jobs/' + this.event.job_id + '/events/' + this.event.id + '/logs').then(res => {\n        this.logs = res.data.data\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/css\" scoped>\n.event-box {\n\n  margin: 0;\n  -webkit-box-shadow: 0px 2px 4px 1px #7A7A7A;\n  box-shadow: 0px 2px 4px 1px #7A7A7A;\n\n  &.active {\n    margin-top: 10px;\n    margin-bottom: 10px;\n\n    .event-box-header .summary {\n      padding-top: 20px;\n      padding-bottom: 20px;\n    }\n\n  }\n\n  .event-box-header {\n    cursor: pointer;\n    user-select: none;\n    .summary {\n      margin-left: 15px;\n      margin-right: 15px;\n      padding-top: 15px;\n      padding-bottom: 15px;\n    }\n  }\n\n  .event-box-content {\n    padding: 15px;\n  }\n\n  &.event-type-enqueued {\n    .event-box-header {\n      color: rgb(13, 60, 97);\n      background-color: rgb(232, 244, 253);\n    }\n  }\n\n  &.event-type-processing {\n    .event-box-header {\n      color: rgb(102, 60, 0);\n      background-color: rgb(255, 244, 229);\n    }\n  }\n\n  &.event-type-failed {\n    .event-box-header {\n      color: rgb(97, 26, 21);\n      background-color: rgb(253, 236, 234);\n    }\n  }\n\n  &.event-type-success {\n    .event-box-header {\n      color: rgb(30, 70, 32);\n      background-color: rgb(237, 247, 237);\n    }\n  }\n\n}\n</style>","import { render } from \"./JobEventBox.vue?vue&type=template&id=653b88e2&scoped=true\"\nimport script from \"./JobEventBox.vue?vue&type=script&lang=js\"\nexport * from \"./JobEventBox.vue?vue&type=script&lang=js\"\n\nimport \"./JobEventBox.vue?vue&type=style&index=0&id=653b88e2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/jake/Documents/Coding/JavaWebStack/jobs/dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-653b88e2\"]])\n\nexport default __exports__","import { render } from \"./Job.vue?vue&type=template&id=45ce9e2a\"\nimport script from \"./Job.vue?vue&type=script&lang=js\"\nexport * from \"./Job.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/jake/Documents/Coding/JavaWebStack/jobs/dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_toDisplayString","$data","id","onClick","$options","type","innerHTML","JSON","stringify","_hoisted_11","_Fragment","_renderList","event","_createBlock","_component_job_event_box","key","role","_hoisted_4","style","_hoisted_10","active","$props","toLowerCase","created_at","show","_hoisted_5","length","_hoisted_6","log","message","_hoisted_9","name","props","Object","data","logs","loading","eventTitles","SCHEDULED","ENQUEUED","PROCESSING","FAILED","SUCCESS","methods","toggleActive","this","fetchLogs","api","job_id","then","res","__exports__","components","JobEventBox","job","$route","params","payload","events","refreshTimer","undefined","created","fetchJob","fetchEvents","setInterval","beforeUnmount","clearInterval","status","$router","push","deleteJob","requeue","render"],"sourceRoot":""}